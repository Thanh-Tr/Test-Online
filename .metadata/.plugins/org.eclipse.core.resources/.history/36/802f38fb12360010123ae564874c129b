<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Vào thi</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
#countdown {
	font-size: 24px;
	font-weight: bold;
	color: red;
	margin-bottom: 20px;
}
</style>

</head>
<body>
	<!-- Đồng hồ đếm ngược -->
	<div id="countdown"></div>
	<form id="examForm" method="post" action="check">
	
		
		<input type="hidden" name="madt" value="${madt}">
		<!-- Các câu hỏi -->
		<c:forEach var="ch" items="${listCH}">
			Câu hỏi: ${ch.moTaCH}<br>
			<input type="radio" name="cautraloi${ch.maCH}" value="A">A. ${ch.cauA}<br>
			<input type="radio" name="cautraloi${ch.maCH}" value="B">B. ${ch.cauB}<br>
			<input type="radio" name="cautraloi${ch.maCH}" value="C">C. ${ch.cauC}<br>
			<input type="radio" name="cautraloi${ch.maCH}" value="D">D. ${ch.cauD}<br>
			<br>
		</c:forEach>
		<button type="submit">Nộp bài</button>
	</form>

<script>
// Thời gian làm bài từ server
var timeLeft = ${thoigianlambai} * 60;

function formatTime(seconds) {
	var m = Math.floor(seconds / 60);
	var s = seconds % 60;
	return `${m.toString().padStart(2, '0')} : ${s.toString().padStart(2, '0')}`;
} 

const countdownElement = document.getElementById("countdown");
countdownElement.innerText = formatTime(timeLeft);

const timer = setInterval(() => {
	timeLeft--;
	countdownElement.innerText = formatTime(timeLeft);

	if (timeLeft <= 0) {
		clearInterval(timer);
		alert("Hết giờ! Bài làm sẽ được nộp.");
		document.getElementById("examForm").submit();
	}
}, 1000);
</script>
</body>
</html>